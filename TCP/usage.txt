实现了3个简易的tcp服务器，哪一个好一点？？？


分析：

第一个版本的服务器不再分析，他只能服务单个客户。

多进程服务器：
收到连接的时候才创建的子进程。创建子进程需要时间。
而客户刚连上我们的时候，我们却花时间去创建子进程。
（注意：创建子进程虽然花费时间少，但抵不过积少成多）
创建子进程的时间成本就落在了客户头上。
所以多进程的缺点在于：
1：连接来的时候才创建子进程，而且创建子进程的成本偏大，
所以性能受损。
2：多进程服务器能够响应或者处理的客户数量受进程所占资
源的影响，进而影响到他所能够服务的客户数是有上限的。
多进程服务器的每个进程是非常耗费资源的，进而导致服务的
客户数是有上限的，并且上限还比较低.(只能服务有限个客户)
3：来一个客户就需要创建一个进程，客户越多进程就越多，系
统里的进程越多，CPU和调度器的压力也就随之增大。进而影响
性能。
(就像是餐厅人多了，为了公平就需要排队，而排队是需要客人
 自己排队的，所以等待的时间就由客户自己承担，对于tcp服
 务器而言，客户一多，那么我们的客户端就需要自己等待，从
 而性能就降低）

优点：
1：代码编写简单
2：能够处理多个客户
3：稳定性强（一个进程挂掉不会影响其他进程）


多线程服务器：
虽然也是收到连接的时候才创建的线程。但是创建线程的成本
相对于进程而言比较低。虽然也耗费资源，但同样的也比进程
耗费的少。多线程有多个客户时，CPU的调度压力也会变大，
线程是调度的基本单位，然而线程的切换比进程的切换成本小。
现在看来，进程有的缺点线程都有，但总是比进程好一点。

优点：
1：可处理多个客户（比多进程服务器能够服务的要多，
因为线程所占用的资源较进程占用的少）
2：代码编写相对而言也不难

相对于多进程服务器而言，多线程服务器的优缺点与之相同，
但不难发现多线程服务器总是比多进程服务器耗费的资源少，
调度周期短。

需要注意的唯独一点：多进程服务器有稳定性好的优点，这
一点多线程服务器是没有的，因为多线程服务器刚刚所有的
东西都是以牺牲稳定性为代价的。对于多线程而言只要其中
一个线程出现问题，那么其他的线程都会挂掉，换言之，
提供多个服务的线程，只要有任何一个线程出现问题，直接
会导致服务器的退出。这也是多线程服务器的一大缺点：
稳定性不好（由于线程安全导致服务器挂掉）


综上所述：无论是多线程还是多进程服务器只能应用于中小型应用。
